<!doctype html>
<html lang="pl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Biogaz AI — Optymalizacja substratu</title>
  <meta name="description" content="Rozszerzony interfejs aplikacji AI dla biogazowni — optymalizacja składu substratu, analiza ekonomiczna i symulacje AI." />
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
  <style>
    :root{--bg:#0f1724;--card:#0b1220;--glass:rgba(255,255,255,0.04);--accent:linear-gradient(135deg,#06b6d4 0%,#7c3aed 100%);--muted:#9aa4b2;--glass-border:rgba(255,255,255,0.06);--radius:14px;font-family:Inter,ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial}
    *{box-sizing:border-box}html,body{height:100%}body{margin:0;background:radial-gradient(1200px 600px at 10% 10%,rgba(124,58,237,0.12),transparent 6%),radial-gradient(900px 400px at 90% 90%,rgba(6,182,212,0.08),transparent 6%),var(--bg);color:#e6eef6;padding:28px;display:flex;justify-content:center;align-items:flex-start}
    .wrap{width:1200px;max-width:100%;display:grid;gap:20px;grid-template-columns:420px 1fr}
    header{grid-column:1/-1;display:flex;align-items:center;gap:16px}
    .logo{display:flex;align-items:center;gap:12px}
    .icon{width:48px;height:48px;border-radius:12px;background:var(--glass);display:grid;place-items:center;border:1px solid var(--glass-border)}
    h1{margin:0;font-size:18px}.lead{margin:0;color:var(--muted)}
    .card{background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));border:1px solid var(--glass-border);padding:18px;border-radius:var(--radius);box-shadow:0 6px 24px rgba(2,6,23,0.6)}
    label{font-size:12px;color:var(--muted);display:block;margin-bottom:6px}input,select{width:100%;padding:10px;border-radius:10px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:inherit}
    .controls-footer{display:flex;gap:10px;margin-top:14px}button{cursor:pointer;border-radius:10px}button.primary{background:var(--accent);border:0;padding:12px 18px;color:#fff;font-weight:600}button.ghost{background:transparent;border:1px solid var(--glass-border);padding:10px 14px;color:var(--muted)}
    .main{display:flex;flex-direction:column;gap:18px}.grid{display:grid;grid-template-columns:1fr 380px;gap:18px}
    .metric{display:flex;justify-content:space-between;align-items:center;padding:14px;border-radius:12px;background:linear-gradient(180deg,rgba(255,255,255,0.015),rgba(255,255,255,0.01));border:1px solid var(--glass-border)}
    canvas{border-radius:12px}
    @media(max-width:1024px){.wrap{grid-template-columns:1fr}.grid{grid-template-columns:1fr}}
    @media(max-width:600px){body{padding:14px}.card{padding:12px}button.primary{padding:10px}}
    footer{grid-column:1/-1;color:var(--muted);font-size:13px;margin-top:8px;text-align:center}
  </style>
</head>
<body>
<div class="wrap">
<header>
  <div class="logo">
    <div class="icon"><svg width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 2C10.34 5.5 7 7 7 10.5C7 13.5 9.5 16 12 16C14.5 16 17 13.5 17 10.5C17 7 13.66 5.5 12 2Z" stroke="#fff" stroke-opacity="0.9" stroke-width="1.2"/><path d="M4 20C4 16 8 13 12 13C16 13 20 16 20 20" stroke="#fff" stroke-opacity="0.6" stroke-width="1.2"/></svg></div>
    <div><h1>Biogaz AI</h1><p class="lead">Optymalizacja substratu, analiza ekonomiczna i symulacja AI</p></div>
  </div>
</header>

<aside class="card">
  <h2>Parametry substratu</h2>
  <form id="inputForm">
    <label>Rodzaj substratu</label>
    <select id="type"><option>Kiszonka kukurydzy</option><option>Obornik świński</option><option>Odpady spożywcze</option><option>Mieszanka</option></select>
    <label>Udział (%)</label><input id="share" type="number" value="50" />
    <label>Sucha masa SM (%)</label><input id="sm" type="number" value="25" />
    <label>VS (%)</label><input id="vs" type="number" value="88" />
    <label>C/N</label><input id="cn" type="number" value="24" />
    <label>pH</label><input id="ph" type="number" value="7.0" />
    <label>Temperatura (°C)</label><input id="temp" type="number" value="38" />
    <label>OLR (kg VS/m³·d)</label><input id="olr" type="number" value="2.3" />

    <h3>Tryb zaawansowany</h3>
    <label>Tryb pracy</label>
    <select id="mode"><option value="mezofilny">Mezofilny (37°C)</option><option value="termofilny">Termofilny (55°C)</option></select>
    <label>Cel optymalizacji</label>
    <select id="goal"><option value="wydajnosc">Maksymalna wydajność</option><option value="koszt">Minimalny koszt</option></select>

    <div class="controls-footer"><button type="button" id="runBtn" class="primary">Optymalizuj</button><button type="button" id="resetBtn" class="ghost">Reset</button></div>
  </form>
</aside>

<main class="main">
  <div class="grid">
    <div class="card">
      <h2>Wynik symulacji</h2>
      <div class="metric"><div>Metan (CH₄)</div><div id="methaneVal">- %</div></div>
      <div class="metric"><div>Biogaz (m³/d)</div><div id="biogasVal">-</div></div>
      <div class="metric"><div>Wydajność (m³/kg VS)</div><div id="effVal">-</div></div>
      <canvas id="trendChart" height="150"></canvas>
    </div>
    <div class="card">
      <h3>Rekomendacje</h3>
      <div id="recommendations"><p>Wyniki pojawią się po symulacji.</p></div>
    </div>
  </div>

  <div class="card"><h3>Analiza ekonomiczna</h3>
    <p>Wprowadź cenę energii i koszty substratu, by zobaczyć prognozę przychodów.</p>
    <label>Cena energii (PLN/kWh)</label><input id="energyPrice" type="number" value="0.65" step="0.01" />
    <label>Koszt substratu (PLN/t)</label><input id="substrateCost" type="number" value="120" />
    <button id="calcProfit" class="primary">Oblicz przychód</button>
    <div id="profitResult" style="margin-top:10px;color:var(--muted)">—</div>
  </div>

  <div class="card"><h3>Symulacja AI (suwaki)</h3>
    <label>Udział substratu (%)</label>
    <input id="sliderShare" type="range" min="0" max="100" value="50" />
    <label>OLR</label>
    <input id="sliderOlr" type="range" min="1" max="5" value="2.3" step="0.1" />
    <p id="sliderInfo">Symuluj zmiany proporcji, aby zobaczyć natychmiastowy efekt.</p>
  </div>

  <div class="card"><h3>Pomoc i informacje</h3>
    <p>Aplikacja Biogaz AI umożliwia symulację wydajności i optymalizację substratów. Dane wejściowe można zmieniać, a model heurystyczny oceni wpływ na produkcję metanu. W wersji produkcyjnej będzie można połączyć z prawdziwym modelem uczenia maszynowego.</p>
  </div>

  <footer>© 2025 Biogaz AI — wersja demonstracyjna</footer>
</main>
</div>
<script>
  const ctx=document.getElementById('trendChart').getContext('2d');
  const chart=new Chart(ctx,{type:'line',data:{labels:[],datasets:[{label:'CH₄ %',data:[],borderColor:'#06b6d4',fill:false},{label:'Biogaz m³/d',data:[],borderColor:'#7c3aed',fill:false}]},options:{plugins:{legend:{labels:{color:'#cfe9ff'}}},scales:{x:{ticks:{color:'#9fb7d0'}},y:{ticks:{color:'#9fb7d0'}}}}});

  function predict(inputs){const base={"Kiszonka kukurydzy":0.55,"Obornik świński":0.6,"Odpady spożywcze":0.65,"Mieszanka":0.58}[inputs.type]||0.55;const f=Math.min(1.25,inputs.vs/80)* (1-Math.abs(inputs.sm-25)/60)*(1-Math.abs(inputs.cn-25)/50)*(1-Math.abs(inputs.ph-7.1)/2)*(1-Math.abs(inputs.temp-38)/30)*(1-Math.max(0,(inputs.olr-3)/6));const m=Math.max(0.4,base*f);const b=(inputs.vs*inputs.share/100)*(inputs.sm/100)*1000*(1-Math.max(0,(inputs.olr-3)/6));return{methanePercent:+(m*100).toFixed(1),biogasM3:Math.round(b),eff:+(m*0.8).toFixed(3)}}

  document.getElementById('runBtn').onclick=()=>{const i={type:type.value,share:+share.value,sm:+sm.value,vs:+vs.value,cn:+cn.value,ph:+ph.value,temp:+temp.value,olr:+olr.value};const r=predict(i);methaneVal.innerText=r.methanePercent+' %';biogasVal.innerText=r.biogasM3;effVal.innerText=r.eff;chart.data.labels.push(new Date().toLocaleTimeString());chart.data.datasets[0].data.push(r.methanePercent);chart.data.datasets[1].data.push(r.biogasM3);chart.update();recommendations.innerHTML='<ul><li>Utrzymuj pH 6.8–7.5.</li><li>Dostosuj C/N do ok. 25.</li><li>OLR nie powyżej 3.</li></ul>';}

  document.getElementById('calcProfit').onclick=()=>{const price=+energyPrice.value;const cost=+substrateCost.value;const gas=+biogasVal.innerText||0;const kWh=gas*6.0;const income=(kWh*price)-(cost/100);profitResult.innerHTML=`Szacowany przychód: <strong>${income.toFixed(2)} PLN/dzień</strong>`;}

  document.getElementById('sliderShare').oninput=()=>{share.value=sliderShare.value;sliderInfo.innerText='Udział: '+sliderShare.value+'%';}
  document.getElementById('sliderOlr').oninput=()=>{olr.value=sliderOlr.value;sliderInfo.innerText+=' | OLR: '+sliderOlr.value;}
</script>
</body>
</html>
