<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BIO-OPTIMUS - Biogas AI Optimizer</title>
    <style>
        /* CSS dla zaawansowanego panelu kontrolnego */
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Roboto:wght@300;400;700&display=swap');
        
        :root {
            --bg-dark: #121212; /* Ekstremalnie ciemne t≈Ço */
            --bg-panel: #1e1e1e; /* T≈Ço sekcji */
            --text-light: #e0e0e0; /* Jasny tekst */
            --accent-main: #00ffff; /* Turkus (Akcent Analityczny) */
            --accent-secondary: #00cc66; /* Zielony (Akcent Energetyczny) */
            --warning-yellow: #ffeb3b; /* Ostrze≈ºenie */
            --danger-red: #ff3d00; /* Krytyczny b≈ÇƒÖd */
            --font-display: 'Orbitron', sans-serif;
            --font-mono: 'Roboto Mono', monospace;
        }

        body {
            font-family: 'Roboto', sans-serif;
            margin: 0;
            background: var(--bg-dark);
            color: var(--text-light);
            line-height: 1.6;
        }
        .container {
            max-width: 1400px;
            margin: 30px auto;
            padding: 20px;
            border: 1px solid rgba(0, 255, 255, 0.1);
        }
        header {
            text-align: center;
            padding-bottom: 20px;
            margin-bottom: 30px;
            border-bottom: 3px solid var(--accent-main);
        }
        h1 {
            font-family: var(--font-display);
            color: var(--accent-main);
            font-size: 3em;
            margin-bottom: 5px;
            text-shadow: 0 0 10px rgba(0, 255, 255, 0.5);
        }
        h2 {
            font-family: var(--font-display);
            color: var(--accent-secondary);
            font-weight: 400;
            font-size: 1.5em;
            margin-top: 0;
            margin-bottom: 15px;
            border-left: 4px solid var(--accent-secondary);
            padding-left: 10px;
        }
        .grid-layout {
            display: grid;
            grid-template-columns: 2fr 1fr; /* Wiƒôksza kolumna na dane i mniejsza na logi */
            gap: 20px;
        }
        .section {
            padding: 20px;
            background-color: var(--bg-panel);
            border-radius: 6px;
            box-shadow: 0 0 8px rgba(0, 0, 0, 0.6);
        }

        /* Sekcja KPI / Wska≈∫nik√≥w */
        .kpi-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }
        .kpi-card {
            background-color: #2a2a2a;
            padding: 20px;
            border-radius: 4px;
            border-bottom: 4px solid var(--accent-secondary);
            text-align: center;
        }
        .kpi-value {
            font-family: var(--font-display);
            font-size: 2.2em;
            color: var(--accent-main);
        }
        .kpi-label {
            font-size: 0.9em;
            color: var(--text-light);
            opacity: 0.7;
        }

        /* Sekcja Optymalizacji i Przycisk√≥w */
        .control-panel {
            background-color: #2a2a2a;
            padding: 20px;
            border-radius: 6px;
            margin-top: 20px;
        }
        .control-panel button {
            background-color: var(--accent-secondary);
            color: var(--bg-dark);
            padding: 12px 25px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: 700;
            width: 100%;
            margin-top: 15px;
            transition: background-color 0.3s;
        }
        .control-panel button:hover {
            background-color: #00ff80;
        }
        .input-group {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }
        .input-group > div {
            flex: 1;
        }
        .input-group label {
            display: block;
            color: var(--accent-main);
            margin-bottom: 5px;
        }
        .input-group input {
            width: 100%;
            padding: 8px;
            background-color: #383838;
            border: 1px solid #555;
            color: var(--text-light);
            border-radius: 4px;
            box-sizing: border-box;
            font-family: var(--font-mono);
        }
        
        /* Sekcja Log√≥w i Alarm√≥w */
        .log-console {
            background-color: #0d0d0d;
            border: 1px solid var(--accent-main);
            padding: 15px;
            height: 400px;
            overflow-y: scroll;
            font-family: var(--font-mono);
            font-size: 0.9em;
            border-radius: 4px;
        }
        .log-line {
            padding: 2px 0;
            border-bottom: 1px dotted #333;
        }
        .log-status { color: var(--accent-secondary); }
        .log-warning { color: var(--warning-yellow); }
        .log-error { color: var(--danger-red); font-weight: bold; }
        .log-info { color: var(--accent-main); }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>BIO-OPTIMUS <span style="font-size: 0.5em; opacity: 0.8;">v2.0</span></h1>
        <p style="color: var(--accent-main); font-size: 1.1em;">AI Engine for Anaerobic Digestion Optimization</p>
    </header>

    <div class="grid-layout">
        <div class="main-content">
            <div class="section">
                <h2>üìà AKTUALNE WSKA≈πNIKI EFEKTYWNO≈öCI</h2>
                <div class="kpi-grid">
                    <div class="kpi-card">
                        <div class="kpi-value" id="kpiMethane">88.5<small>%</small></div>
                        <div class="kpi-label">PROGNOZA $\text{CH}_4$ (24H)</div>
                    </div>
                    <div class="kpi-card">
                        <div class="kpi-value" id="kpiVFA">0.45</div>
                        <div class="kpi-label">LKT/TA (VFA/ALK)</div>
                    </div>
                    <div class="kpi-card">
                        <div class="kpi-value" id="kpiTemp">40.1<small>¬∞C</small></div>
                        <div class="kpi-label">TEMP. FERMENTACJI</div>
                    </div>
                </div>
            </div>

            <div class="section control-panel">
                <h2>üõ†Ô∏è MODU≈Å WEJ≈öCIA I KONTROLI AI</h2>
                <div class="input-group">
                    <div>
                        <label for="cornSilage">DAWKA KISZONKI [t/dzie≈Ñ]</label>
                        <input type="number" id="cornSilage" value="15.0" step="0.1">
                    </div>
                    <div>
                        <label for="manureSlurry">DAWKA GNOJOWICY [m¬≥/dzie≈Ñ]</label>
                        <input type="number" id="manureSlurry" value="50.0" step="1.0">
                    </div>
                </div>

                <button onclick="startAIOptimization()">
                    <span id="buttonIcon">‚ñ∂Ô∏è</span> URUCHOM PREDYKCYJNƒÑ ANALIZƒò (LSTM & REGRESSOR)
                </button>
            </div>

            <div class="section">
                <h2>‚úÖ REKOMENDACJE AI (Ostateczne)</h2>
                <div class="log-console" id="recommendationOutput" style="height: 150px;">
                    <span class="log-line log-status">> SYSTEM STATUS: READY. Waiting for input...</span>
                </div>
            </div>
        </div>

        <div class="log-area">
            <div class="section">
                <h2>üìù LOG KONSOLE ANALIZY RYZYKA</h2>
                <div class="log-console" id="analysisLog">
                    <span class="log-line log-info">> BIO-OPTIMUS v2.0 AI online.</span>
                    <span class="log-line log-info">> Initializing LSTM for stability prediction... [OK]</span>
                    <span class="log-line log-info">> Initializing Anomaly Detector for equipment... [OK]</span>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    function logToConsole(message, type = 'info') {
        const consoleElement = document.getElementById('analysisLog');
        const now = new Date();
        const time = now.toLocaleTimeString();
        const logLine = document.createElement('span');
        logLine.className = `log-line log-${type}`;
        logLine.innerHTML = `[${time}] > ${message}`;
        consoleElement.appendChild(logLine);
        consoleElement.scrollTop = consoleElement.scrollHeight; // Scroll na d√≥≈Ç
    }

    function outputRecommendation(message, type = 'status') {
        const outputElement = document.getElementById('recommendationOutput');
        const logLine = document.createElement('span');
        logLine.className = `log-line log-${type}`;
        logLine.innerHTML = `> ${message}`;
        outputElement.appendChild(logLine);
        outputElement.scrollTop = outputElement.scrollHeight;
    }

    function startAIOptimization() {
        const button = document.querySelector('button');
        const buttonIcon = document.getElementById('buttonIcon');
        const silageDose = parseFloat(document.getElementById('cornSilage').value);
        const slurryDose = parseFloat(document.getElementById('manureSlurry').value);

        // Walidacja
        if (isNaN(silageDose) || isNaN(slurryDose) || silageDose <= 0 || slurryDose <= 0) {
            logToConsole('ERROR: Invalid input data. Check dose values.', 'error');
            return;
        }

        // --- 1. Faza: Uruchomienie ---
        button.disabled = true;
        buttonIcon.innerText = '‚è≥';
        document.getElementById('recommendationOutput').innerHTML = '';
        logToConsole('AI PROCESSING: Starting new optimization cycle...', 'info');

        // Symulacja log√≥w konsoli
        setTimeout(() => logToConsole(`LSTM: Reading current parameters (pH: ${document.getElementById('kpiPH').innerText}, VFA: ${document.getElementById('kpiVFA').innerText})...`, 'info'), 500);
        setTimeout(() => logToConsole(`REGRESSOR: Analyzing cost-to-efficiency ratio for ${silageDose}t and ${slurryDose}m¬≥...`, 'info'), 1000);

        // --- 2. Faza: Predykcja i generowanie wynik√≥w (3 sekundy) ---
        setTimeout(() => {
            // Logika AI - Predykcja Stabilno≈õci (LSTM - Symulacja ryzyka)
            const vfaRatio = parseFloat(document.getElementById('kpiVFA').innerText);
            let riskLevel = 'status';
            let riskMessage = 'LSTM: Stability forecast: OK. 0% risk of biological inhibition (48h).';

            if (vfaRatio > 0.48) {
                riskLevel = 'error';
                riskMessage = 'LSTM CRITICAL ALERT! ‚ö†Ô∏è High risk of acidification (65% chance in 24h).';
                outputRecommendation(`KRYTYCZNE: Natychmiast zmniejsz wsad o 30% i dodaj 500kg regulatora pH.`, 'error');
            } else if (vfaRatio > 0.40) {
                riskLevel = 'warning';
                riskMessage = 'LSTM WARNING: VFA trend is increasing. Monitor closely (Risk 15% in 48h).';
                outputRecommendation(`OSTRZE≈ªENIE: Zmniejsz dawkƒô kiszonki kukurydzianej o 5% i monitoruj LKT/TA.`, 'warning');
            }
            logToConsole(riskMessage, riskLevel);

            // Logika AI - Optymalizacja Wsadu (Regressor)
            const methaneImprovement = (Math.random() * 1.5).toFixed(1); // Wzrost CH4
            const optimalSilage = (silageDose * 0.98).toFixed(1);
            const optimalSlurry = (slurryDose * 1.02).toFixed(1);
            
            logToConsole(`REGRESSOR: Recommending new feed mix for +${methaneImprovement}% CH4...`, 'info');
            outputRecommendation(`OPTYMALIZACJA WSADU: Zalecana dawka: Kiszonka ${optimalSilage}t/dzie≈Ñ, Gnojowica ${optimalSlurry}m¬≥/dzie≈Ñ. Oczekiwany wzrost: +${methaneImprovement}% metanu.`, 'log-status');
            
            // Logika AI - Predykcyjne Utrzymanie Ruchu (Anomaly Detector)
            logToConsole('ANOMALY DETECTOR: Scanning equipment status...', 'info');
            if (Math.random() > 0.7) { // 30% szans na alert
                logToConsole('ANOMALY ALERT: Mieszad≈Ço F-01 - wykryto nienormalne drgania (odchylenie +20%).', 'warning');
                outputRecommendation(`UTRZYMANIE RUCHU: Mieszad≈Ço F-01 wymaga kontroli technicznej ≈Ço≈ºysk w ciƒÖgu 7 dni. Zredukuj moc o 10%.`, 'warning');
            } else {
                logToConsole('ANOMALY DETECTOR: All equipment running within baseline parameters.', 'log-status');
            }

            // Aktualizacja g≈Ç√≥wnego KPI
            const newMethane = (parseFloat(document.getElementById('kpiMethane').innerText) + parseFloat(methaneImprovement) / 2).toFixed(1);
            document.getElementById('kpiMethane').innerText = newMethane + '%';
            
            // --- 3. Faza: Zako≈Ñczenie ---
            logToConsole('AI PROCESSING: Cycle complete. Results posted to Recommendation Panel.', 'log-status');
            button.disabled = false;
            buttonIcon.innerText = '‚úÖ';
        }, 3000);
    }

    // Ustawienie poczƒÖtkowego statusu VFA/pH (Symulacja danych z czujnik√≥w)
    document.addEventListener('DOMContentLoaded', () => {
        document.getElementById('kpiPH').innerText = (7.5 - Math.random() * 0.5).toFixed(2);
        document.getElementById('kpiVFA').innerText = (0.35 + Math.random() * 0.15).toFixed(2);
    });

</script>

</body>
</html>
